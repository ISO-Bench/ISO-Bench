{
  "commit_hash": "a37e1247c183cff86a18f2ed1a075e40704b1c5e",
  "pr_url": "https://github.com/sgl-project/sglang/pull/7724",
  "pr_date": null,
  "timeline_text": "Copy link Collaborator b8zhong commented Jul 2, 2025 \u2022 edited Loading Uh oh! There was an error while loading. Please reload this page . Motivation Improve performance of Base64 operations by replacing the standard base64 module with pybase64 , which provides a SIMD-accelerated C extension. Benchmarks show up to 28\u00d7 faster decoding and 9\u00d7 faster encoding compared to the standard library. Modifications Replaced all imports and usage of the base64 module with pybase64 . Preserved API behavior using pybase64 's standard and URL-safe interfaces. Applied validate=True where applicable for maximal performance. Tests Performed on H100 80GB HBM3, Sapphire Rapids CPU Performance benchmark (after starting the server): python3 bench_serving.py --model Qwen/Qwen2.5-VL-7B-Instruct --backend sglang --dataset-name mmmu --request-rate 10 --num-prompts 100 --port 30000 Summary: Metric Before ( base64 ) After ( pybase64 ) Change Backend sglang sglang \u2013 Traffic request rate 10.0 10.0 \u2013 Max request concurrency not set not set \u2013 Successful requests 98 98 \u2013 Benchmark duration (s) 23.00 22.81 -0.19 s Total input tokens 6352 6352 \u2013 Total generated tokens 100352 100352 \u2013 Total generated tokens (retokenized) 100257 100257 \u2013 Request throughput (req/s) 4.26 4.30 \u2191 +0.94% Input token throughput (tok/s) 276.13 278.46 \u2191 +0.84% Output token throughput (tok/s) 4362.48 4399.22 \u2191 +0.84% Total token throughput (tok/s) 4638.61 4677.67 \u2191 +0.84% Concurrency 65.08 64.20 \u2193 -1.35% End-to-End Latency Metric Before (ms) After (ms) Change Mean E2E Latency 15275.51 14942.63 \u2193 -2.18% Median E2E Latency 15514.04 15136.41 \u2193 -2.44% Time to First Token (TTFT) Metric Before (ms) After (ms) Change Mean TTFT 99.84 50.87 \u2193 -49.06% Median TTFT 51.62 47.37 \u2193 -8.23% P99 TTFT 563.09 127.30 \u2193 -77.39% Inter-Token Latency (ITL) Metric Before (ms) After (ms) Change Mean ITL 14.83 14.56 \u2193 -1.82% Median ITL 14.51 14.23 \u2193 -1.93% P95 ITL 21.52 21.57 \u2248 P99 ITL 36.58 35.49 \u2193 -2.98% Max ITL 645.31 181.86 \u2193 -71.83% Before ( base64 ): ============ Serving Benchmark Result ============\nBackend:                                 sglang    \nTraffic request rate:                    10.0      \nMax request concurrency:                 not set   \nSuccessful requests:                     98        \nBenchmark duration (s):                  23.00     \nTotal input tokens:                      6352      \nTotal generated tokens:                  100352    \nTotal generated tokens (retokenized):    100257    \nRequest throughput (req/s):              4.26      \nInput token throughput (tok/s):          276.13    \nOutput token throughput (tok/s):         4362.48   \nTotal token throughput (tok/s):          4638.61   \nConcurrency:                             65.08     \n----------------End-to-End Latency----------------\nMean E2E Latency (ms):                   15275.51  \nMedian E2E Latency (ms):                 15514.04  \n---------------Time to First Token----------------\nMean TTFT (ms):                          99.84     \nMedian TTFT (ms):                        51.62     \nP99 TTFT (ms):                           563.09    \n---------------Inter-Token Latency----------------\nMean ITL (ms):                           14.83     \nMedian ITL (ms):                         14.51     \nP95 ITL (ms):                            21.52     \nP99 ITL (ms):                            36.58     \nMax ITL (ms):                            645.31    \n================================================== After (this PR, pybase64 ): ============ Serving Benchmark Result ============\nBackend:                                 sglang    \nTraffic request rate:                    10.0      \nMax request concurrency:                 not set   \nSuccessful requests:                     98        \nBenchmark duration (s):                  22.81     \nTotal input tokens:                      6352      \nTotal generated tokens:                  100352    \nTotal generated tokens (retokenized):    100257    \nRequest throughput (req/s):              4.30      \nInput token throughput (tok/s):          278.46    \nOutput token throughput (tok/s):         4399.22   \nTotal token throughput (tok/s):          4677.67   \nConcurrency:                             64.20     \n----------------End-to-End Latency----------------\nMean E2E Latency (ms):                   14942.63  \nMedian E2E Latency (ms):                 15136.41  \n---------------Time to First Token----------------\nMean TTFT (ms):                          50.87     \nMedian TTFT (ms):                        47.37     \nP99 TTFT (ms):                           127.30    \n---------------Inter-Token Latency----------------\nMean ITL (ms):                           14.56     \nMedian ITL (ms):                         14.23     \nP95 ITL (ms):                            21.57     \nP99 ITL (ms):                            35.49     \nMax ITL (ms):                            181.86    \n================================================== Testing: python -m pytest srt/test_vision_openai_server_common.py -vv platform linux -- Python 3.12.1, pytest-8.4.1\ncollected 7 items\n\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_audio_chat_completion PASSED\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_mixed_batch PASSED\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_multi_images_chat_completion PASSED\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_multi_turn_chat_completion PASSED\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_regex PASSED\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_single_image_chat_completion PASSED\nsrt/test_vision_openai_server_common.py::TestOpenAIVisionServer::test_video_chat_completion PASSED\n\n1 warning unrelated to code changes Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page . \ud83d\udc4d 3 JustinTong0323, Swipe4057, and applesaucethebun reacted with thumbs up emoji All reactions \ud83d\udc4d 3 reactions b8zhong added 2 commits July 2, 2025 16:44 feat: use pybase64 c002c15 feat: use pybase64 89a45ad b8zhong requested review from merrymercy , Ying1123 , zhyncs , mickqian , JustinTong0323 , zhaochenyang20 , hnyls2002 , ispobock and ByronHsu as code owners July 2, 2025 20:56 gemini-code-assist bot reviewed Jul 2, 2025 View reviewed changes Copy link Contributor gemini-code-assist bot left a comment There was a problem hiding this comment. Choose a reason for hiding this comment The reason will be displayed to describe this comment to others. Learn more . Choose a reason Spam Abuse Off Topic Outdated Duplicate Resolved Hide comment Summary of Changes Hello @b8zhong , I'm Gemini Code Assist 1 ! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed! This pull request introduces a significant performance enhancement by migrating all Base64 operations from Python's built-in base64 module to the highly optimized pybase64 library. This change is crucial for improving the efficiency of multimodal data processing, such as image and audio handling, which heavily relies on Base64 encoding and decoding, without altering the public API. Highlights Performance Optimization : Replaced the standard base64 module with pybase64 across the codebase. This change leverages pybase64 's SIMD-accelerated C extension to significantly improve the performance of Base64 encoding and decoding operations, with reported benchmarks showing up to 28x faster decoding and 9x faster encoding. Dependency Management : Added pybase64 as a new runtime dependency in python/pyproject.toml to ensure the optimized library is available. API Compatibility and Data Integrity : Ensured that the transition to pybase64 maintains compatibility with the existing Base64 API. For decoding operations, validate=True has been explicitly applied to ensure data integrity and maximize performance where applicable. Using Gemini Code Assist The full guide for Gemini Code Assist can be found on our documentation page , here are some quick tips. Invoking Gemini You can request assistance from Gemini at any point in your pull request via creating an issue comment (i.e. comment on the pull request page) using either /gemini <command> or @gemini-code-assist <command> . Below is a summary of the supported commands. Feature Command Description Code Review /gemini review Performs a code review for the current pull request in its current state. Pull Request Summary /gemini summary Provides a summary of the current pull request in its current state. Comment @gemini-code-assist Responds in comments when explicitly tagged, both in issue comments and review comments. Help /gemini help Displays a list of available commands. Customization To customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a .gemini/ folder in the base of the repository. Detailed instructions can be found here . Limitations & Feedback Gemini Code Assist is currently in preview and may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with \ud83d\udc4d and \ud83d\udc4e on @gemini-code-assist comments to provide feedback. You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the Gemini Code Assist IDE Extension . Footnotes Review the Privacy Notices , Generative AI Prohibited Use Policy , Terms of Service , and learn how to configure Gemini Code Assist in GitHub here . Gemini can make mistakes, so double check it and use code with caution . \u21a9 Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page . \ud83d\udc4d 1 JustinTong0323 reacted with thumbs up emoji All reactions \ud83d\udc4d 1 reaction b8zhong added\n  the performance label Jul 2, 2025 gemini-code-assist bot reviewed Jul 2, 2025 View reviewed changes Copy link Contributor gemini-code-assist bot left a comment There was a problem hiding this comment. Choose a reason for hiding this comment The reason will be displayed to describe this comment to others. Learn more . Choose a reason Spam Abuse Off Topic Outdated Duplicate Resolved Hide comment Code Review This pull request replaces the standard base64 module with the more performant pybase64 library. The changes are applied consistently across the codebase, including adding the new dependency and using validate=True for decoding. I have one suggestion to refactor some duplicated code in the load_image function to improve maintainability. Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page . All reactions python/sglang/srt/utils.py Show resolved Hide resolved Uh oh! There was an error while loading. Please reload this page . Copy link Collaborator JustinTong0323 commented Jul 2, 2025 Could you also do some performance comparison? Thanks! \ud83d\udc4d 2 b8zhong and Swipe4057 reacted with thumbs up emoji All reactions \ud83d\udc4d 2 reactions Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page . fix conflict 8799760 Copy link Collaborator Author b8zhong commented Jul 7, 2025 @JustinTong0323 I just added it to the original PR \ud83d\udc4d All reactions Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page . JustinTong0323 approved these changes Jul 7, 2025 View reviewed changes Copy link Collaborator JustinTong0323 left a comment There was a problem hiding this comment. Choose a reason for hiding this comment The reason will be displayed to describe this comment to others. Learn more . Choose a reason Spam Abuse Off Topic Outdated Duplicate Resolved Hide comment Good job! Sorry, something went wrong. Uh oh! There was an error while loading. Please reload this page . All reactions Hide details View details zhyncs merged commit a37e124 into sgl-project : main Jul 8, 2025 261 of 286 checks passed Uh oh! There was an error while loading. Please reload this page . chenxijun1029 pushed a commit\n        to chenxijun1029/sglang\n      that referenced\n      this pull request Jul 17, 2025 [Multimodal][Perf] Use pybase64 instead of base64 ( sgl-project#7724 ) 566b067 shuaills pushed a commit\n        to shuaills/sglang\n      that referenced\n      this pull request Jul 21, 2025 [Multimodal][Perf] Use pybase64 instead of base64 ( sgl-project#7724 ) f4a366a Sign up for free to join this conversation on GitHub .\n    Already have an account? Sign in to comment",
  "timeline_extracted_at": "2025-09-11 18:56:16",
  "has_lm_eval": false,
  "has_performance": true,
  "has_serving": true,
  "has_general_test": true,
  "test_details": "PERF | SERVING | TEST",
  "analysis_extracted_at": null,
  "models": [
    "Qwen/Qwen2.5-VL-7B-Instruct"
  ],
  "lm_eval_commands": [
    "lm_eval --model sglang --model_args pretrained=Qwen/Qwen2.5-VL-7B-Instruct --tasks mmmu --batch_size 1"
  ],
  "perf_command": "python3 bench_serving.py --model Qwen/Qwen2.5-VL-7B-Instruct --backend sglang --dataset-name mmmu --request-rate 10 --num-prompts 100 --port 30000",
  "commit_subject": "[Multimodal][Perf] Use `pybase64` instead of `base64` (#7724)",
  "commit_message": "[Multimodal][Perf] Use `pybase64` instead of `base64` (#7724)",
  "commit_date": "2025-07-08T14:00:58-07:00",
  "files_changed": [
    "python/pyproject.toml",
    "python/sglang/bench_serving.py",
    "python/sglang/srt/entrypoints/http_server_engine.py",
    "python/sglang/srt/multimodal/mm_utils.py",
    "python/sglang/srt/utils.py",
    "python/sglang/utils.py",
    "test/srt/test_vision_openai_server_common.py"
  ],
  "functions_changed": [],
  "stats": {
    "commit_year": 2025,
    "num_edited_lines": 38,
    "num_files": 7,
    "num_hunks": 19,
    "num_non_test_edited_lines": 38,
    "num_non_test_files": 7,
    "num_test_files": 0,
    "only_non_test_files": 1,
    "only_test_files": 0
  },
  "diff_text": "diff --git a/python/pyproject.toml b/python/pyproject.toml\nindex e72488849..0d6d712a6 100644\n--- a/python/pyproject.toml\n+++ b/python/pyproject.toml\n@@ -38,6 +38,7 @@ runtime_common = [\n     \"psutil\",\n     \"pydantic\",\n     \"pynvml\",\n+    \"pybase64\",\n     \"python-multipart\",\n     \"pyzmq>=25.1.2\",\n     \"soundfile==0.13.1\",\ndiff --git a/python/sglang/bench_serving.py b/python/sglang/bench_serving.py\nindex 04c2202d2..3ba4eae0f 100644\n--- a/python/sglang/bench_serving.py\n+++ b/python/sglang/bench_serving.py\n@@ -814,9 +814,9 @@ def sample_mmmu_requests(\n         List of tuples (prompt, prompt_token_len, output_token_len).\n     \"\"\"\n     try:\n-        import base64\n         import io\n \n+        import pybase64\n         from datasets import load_dataset\n     except ImportError:\n         raise ImportError(\"Please install datasets: pip install datasets\")\n@@ -867,7 +867,7 @@ def sample_mmmu_requests(\n                     # Encode image to base64\n                     buffered = io.BytesIO()\n                     image.save(buffered, format=\"JPEG\")\n-                    img_str = base64.b64encode(buffered.getvalue()).decode(\"utf-8\")\n+                    img_str = pybase64.b64encode(buffered.getvalue()).decode(\"utf-8\")\n                     image_data = f\"data:image/jpeg;base64,{img_str}\"\n                 else:\n                     continue\ndiff --git a/python/sglang/srt/entrypoints/http_server_engine.py b/python/sglang/srt/entrypoints/http_server_engine.py\nindex b2edf1abe..d1db80d65 100644\n--- a/python/sglang/srt/entrypoints/http_server_engine.py\n+++ b/python/sglang/srt/entrypoints/http_server_engine.py\n@@ -1,4 +1,3 @@\n-import base64\n import copy\n import dataclasses\n import multiprocessing\n@@ -7,6 +6,7 @@ import threading\n import time\n from typing import Any, Dict, List, Optional, Tuple, Union\n \n+import pybase64\n import requests\n import torch\n import torch.distributed as dist\ndiff --git a/python/sglang/srt/multimodal/mm_utils.py b/python/sglang/srt/multimodal/mm_utils.py\nindex 9c05c1859..c399be806 100644\n--- a/python/sglang/srt/multimodal/mm_utils.py\n+++ b/python/sglang/srt/multimodal/mm_utils.py\n@@ -28,12 +28,12 @@ LLaVA-Onevision : https://arxiv.org/pdf/2408.03326\n \n \"\"\"\n import ast\n-import base64\n import math\n import re\n from io import BytesIO\n \n import numpy as np\n+import pybase64\n from PIL import Image\n \n from sglang.srt.utils import flatten_nested_list\n@@ -252,7 +252,7 @@ def process_anyres_image(image, processor, grid_pinpoints):\n \n \n def load_image_from_base64(image):\n-    return Image.open(BytesIO(base64.b64decode(image)))\n+    return Image.open(BytesIO(pybase64.b64decode(image, validate=True)))\n \n \n def expand2square(pil_img, background_color):\ndiff --git a/python/sglang/srt/utils.py b/python/sglang/srt/utils.py\nindex 052e7328f..bc2affa1a 100644\n--- a/python/sglang/srt/utils.py\n+++ b/python/sglang/srt/utils.py\n@@ -15,7 +15,6 @@\n \n from __future__ import annotations\n \n-import base64\n import builtins\n import ctypes\n import dataclasses\n@@ -68,6 +67,7 @@ from typing import (\n \n import numpy as np\n import psutil\n+import pybase64\n import requests\n import torch\n import torch.distributed\n@@ -616,7 +616,7 @@ def decode_video_base64(video_base64):\n     from PIL import Image\n \n     # Decode the base64 string\n-    video_bytes = base64.b64decode(video_base64)\n+    video_bytes = pybase64.b64decode(video_base64, validate=True)\n \n     # Placeholder for the start indices of each PNG image\n     img_starts = []\n@@ -702,7 +702,9 @@ def load_audio(audio_file: str, sr: int = 16000, mono: bool = True) -> np.ndarra\n         audio, original_sr = sf.read(BytesIO(audio_file))\n     elif audio_file.startswith(\"data:\"):\n         audio_file = audio_file.split(\",\")[1]\n-        audio, original_sr = sf.read(BytesIO(base64.b64decode(audio_file)))\n+        audio, original_sr = sf.read(\n+            BytesIO(pybase64.b64decode(audio_file, validate=True))\n+        )\n     elif audio_file.startswith(\"http://\") or audio_file.startswith(\"https://\"):\n         timeout = int(os.getenv(\"REQUEST_TIMEOUT\", \"5\"))\n         response = requests.get(audio_file, stream=True, timeout=timeout)\n@@ -771,12 +773,12 @@ def load_image(\n         image = Image.open(image_file)\n     elif image_file.startswith(\"data:\"):\n         image_file = image_file.split(\",\")[1]\n-        image = Image.open(BytesIO(base64.b64decode(image_file)))\n+        image = Image.open(BytesIO(pybase64.b64decode(image_file, validate=True)))\n     elif image_file.startswith(\"video:\"):\n         image_file = image_file.replace(\"video:\", \"\")\n         image, image_size = decode_video_base64(image_file)\n     elif isinstance(image_file, str):\n-        image = Image.open(BytesIO(base64.b64decode(image_file)))\n+        image = Image.open(BytesIO(pybase64.b64decode(image_file, validate=True)))\n     else:\n         raise ValueError(f\"Invalid image: {image}\")\n \n@@ -1866,7 +1868,7 @@ class MultiprocessingSerializer:\n \n         if output_str:\n             # Convert bytes to base64-encoded string\n-            output = base64.b64encode(output).decode(\"utf-8\")\n+            output = pybase64.b64encode(output).decode(\"utf-8\")\n \n         return output\n \n@@ -1883,7 +1885,7 @@ class MultiprocessingSerializer:\n         \"\"\"\n         if isinstance(data, str):\n             # Decode base64 string to bytes\n-            data = base64.b64decode(data)\n+            data = pybase64.b64decode(data, validate=True)\n \n         return ForkingPickler.loads(data)\n \ndiff --git a/python/sglang/utils.py b/python/sglang/utils.py\nindex 6b3f36e19..83c653232 100644\n--- a/python/sglang/utils.py\n+++ b/python/sglang/utils.py\n@@ -1,6 +1,5 @@\n \"\"\"Common utilities\"\"\"\n \n-import base64\n import importlib\n import json\n import logging\n@@ -20,6 +19,7 @@ from json import dumps\n from typing import Any, Callable, List, Optional, Tuple, Type, Union\n \n import numpy as np\n+import pybase64\n import requests\n from IPython.display import HTML, display\n from pydantic import BaseModel\n@@ -148,15 +148,15 @@ def encode_image_base64(image_path: Union[str, bytes]):\n     if isinstance(image_path, str):\n         with open(image_path, \"rb\") as image_file:\n             data = image_file.read()\n-            return base64.b64encode(data).decode(\"utf-8\")\n+            return pybase64.b64encode(data).decode(\"utf-8\")\n     elif isinstance(image_path, bytes):\n-        return base64.b64encode(image_path).decode(\"utf-8\")\n+        return pybase64.b64encode(image_path).decode(\"utf-8\")\n     else:\n         # image_path is PIL.WebPImagePlugin.WebPImageFile\n         image = image_path\n         buffered = BytesIO()\n         image.save(buffered, format=\"PNG\")\n-        return base64.b64encode(buffered.getvalue()).decode(\"utf-8\")\n+        return pybase64.b64encode(buffered.getvalue()).decode(\"utf-8\")\n \n \n def encode_frame(frame):\n@@ -223,7 +223,7 @@ def encode_video_base64(video_path: str, num_frames: int = 16):\n     video_bytes = b\"\".join(encoded_frames)\n \n     # Encode the concatenated bytes to base64\n-    video_base64 = \"video:\" + base64.b64encode(video_bytes).decode(\"utf-8\")\n+    video_base64 = \"video:\" + pybase64.b64encode(video_bytes).decode(\"utf-8\")\n \n     return video_base64\n \ndiff --git a/test/srt/test_vision_openai_server_common.py b/test/srt/test_vision_openai_server_common.py\nindex 3687d9381..42b8e889d 100644\n--- a/test/srt/test_vision_openai_server_common.py\n+++ b/test/srt/test_vision_openai_server_common.py\n@@ -1,5 +1,4 @@\n import base64\n-import copy\n import io\n import json\n import os",
  "apis": [
    "sglang.utils.encode_image_base64",
    "sglang.srt.utils.decode_video_base64",
    "sglang.srt.utils.load_audio",
    "sglang.srt.utils.MultiprocessingSerializer.serialize"
  ],
  "affected_paths": [
    "/path/to/repos/sglang/python/sglang/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/utils.py",
    "/path/to/repos/sglang/sgl-kernel/python/sgl_kernel/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/disaggregation/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/weight_sync/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/layers/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/distributed/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/managers/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/function_call/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/configs/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/connector/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/model_loader/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/lora/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/disaggregation/common/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/layers/attention/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/layers/quantization/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/layers/moe/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/entrypoints/openai/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/layers/quantization/compressed_tensors/utils.py",
    "/path/to/repos/sglang/python/sglang/srt/managers/mm_utils.py",
    "/path/to/repos/sglang/python/sglang/srt/multimodal/mm_utils.py"
  ],
  "repo_path": "/path/to/repos/sglang",
  "llm_reason": "The commit replaces Python\u2019s built-in base64 library with the pybase64 package across multiple non-test source files. This change is applied in performance-critical sections responsible for image and video encoding/decoding, which are top-level APIs in the multimodal module. The commit is not just a refactoring, but a deliberate change intended to improve performance by using a faster implementation of base64 encoding/decoding. Although the commit message tags [Perf], the changes affect non-test source code operations on the CPU and are testable without GPU, satisfying the performance optimization criteria.",
  "llm_api_reason": "This commit replaces several occurrences of the standard \u201cbase64\u201d module with \u201cpybase64\u201d. The change updates the dependency in pyproject.toml and then updates multiple internal utility functions (in sglang/utils.py, sglang/srt/utils.py, sglang/bench_serving.py, sglang/srt/entrypoints/http_server_engine.py, and sglang/srt/multimodal/mm_utils.py) to use pybase64.b64encode and pybase64.b64decode (with validation) rather than base64. Essentially, these modifications affect common serialization and image/audio/video decoding utilities that are used by the serving and multimodal pipelines."
}