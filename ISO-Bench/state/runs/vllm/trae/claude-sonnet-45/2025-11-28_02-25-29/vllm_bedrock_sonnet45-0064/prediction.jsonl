{"instance_id": "/home/ubuntu/OmniPerf-Bench/vllm__repo-9bde5ba", "model_patch": "diff --git a/vllm/v1/core/block_pool.py b/vllm/v1/core/block_pool.py\nindex 43f30f710..177916ef0 100644\n--- a/vllm/v1/core/block_pool.py\n+++ b/vllm/v1/core/block_pool.py\n@@ -67,11 +67,11 @@ class BlockPool:\n         Returns:\n             The cached block if it exists, or None.\n         \"\"\"\n-        if block_hash in self.cached_block_hash_to_block:\n-            first_block_id = list(\n-                self.cached_block_hash_to_block[block_hash].keys())[0]\n-            return self.cached_block_hash_to_block[block_hash][first_block_id]\n-        return None\n+        cached_blocks = self.cached_block_hash_to_block.get(block_hash)\n+        if not cached_blocks:\n+            return None\n+        first_block_id = next(iter(cached_blocks))\n+        return cached_blocks[first_block_id]\n \n     def cache_full_blocks(\n         self,\n@@ -199,15 +199,20 @@ class BlockPool:\n             True if the block is evicted, False otherwise.\n         \"\"\"\n         block_hash = block.block_hash\n-        if block_hash and block_hash in self.cached_block_hash_to_block:\n-            block.reset_hash()\n-            del self.cached_block_hash_to_block[block_hash][block.block_id]\n+        if not block_hash:\n+            return False\n+        \n+        cached_blocks = self.cached_block_hash_to_block.get(block_hash)\n+        if cached_blocks is None:\n+            return False\n+        \n+        block.reset_hash()\n+        del cached_blocks[block.block_id]\n \n-            if len(self.cached_block_hash_to_block[block_hash]) == 0:\n-                del self.cached_block_hash_to_block[block_hash]\n+        if not cached_blocks:\n+            del self.cached_block_hash_to_block[block_hash]\n \n-            return True\n-        return False\n+        return True\n \n     def touch(self, blocks: list[KVCacheBlock]) -> None:\n         \"\"\"Touch a block increases its reference count by 1, and may remove\n", "model_name_or_path": "gpt-5-2025-08-07"}
