{"instance_id": "/home/ubuntu/OmniPerf-Bench/vllm__repo-0fca3cd", "model_patch": "diff --git a/examples/tensorize_vllm_model.py b/examples/tensorize_vllm_model.py\nindex e245616..aef574b 100644\n--- a/examples/tensorize_vllm_model.py\n+++ b/examples/tensorize_vllm_model.py\n@@ -179,10 +179,9 @@ def _get_vllm_model_architecture(config: PretrainedConfig) -> Type[nn.Module]:\n \n \n def serialize():\n-\n-    eng_args_dict = {f.name: getattr(args, f.name) for f in\n-                     dataclasses.fields(EngineArgs)}\n-    engine_args = EngineArgs.from_cli_args(argparse.Namespace(**eng_args_dict))\n+    # Directly create dict without intermediate variable for better performance\n+    engine_args = EngineArgs.from_cli_args(argparse.Namespace(\n+        **{f.name: getattr(args, f.name) for f in dataclasses.fields(EngineArgs)}))\n     engine = LLMEngine.from_engine_args(engine_args)\n \n     model = (engine.model_executor.driver_worker.\n@@ -241,12 +240,11 @@ def deserialize():\n \n args = parse_args()\n \n-s3_access_key_id = (args.s3_access_key_id or os.environ.get(\"S3_ACCESS_KEY_ID\")\n-                    or None)\n+s3_access_key_id = args.s3_access_key_id or os.environ.get(\"S3_ACCESS_KEY_ID\")\n s3_secret_access_key = (args.s3_secret_access_key\n-                        or os.environ.get(\"S3_SECRET_ACCESS_KEY\") or None)\n+                        or os.environ.get(\"S3_SECRET_ACCESS_KEY\"))\n \n-s3_endpoint = (args.s3_endpoint or os.environ.get(\"S3_ENDPOINT_URL\") or None)\n+s3_endpoint = args.s3_endpoint or os.environ.get(\"S3_ENDPOINT_URL\")\n \n _read_stream, _write_stream = (partial(\n     stream_io.open_stream,\ndiff --git a/tests/tensorizer_loader/tensorize_vllm_model_for_testing.py b/tests/tensorizer_loader/tensorize_vllm_model_for_testing.py\nindex 0e113ab..336dfab 100644\n--- a/tests/tensorizer_loader/tensorize_vllm_model_for_testing.py\n+++ b/tests/tensorizer_loader/tensorize_vllm_model_for_testing.py\n@@ -143,9 +143,9 @@ def _get_vllm_model_architecture(config: PretrainedConfig) -> Type[nn.Module]:\n \n \n def serialize():\n-    eng_args_dict = {f.name: getattr(args, f.name) for f in\n-                     dataclasses.fields(EngineArgs)}\n-    engine_args = EngineArgs.from_cli_args(argparse.Namespace(**eng_args_dict))\n+    # Directly create dict without intermediate variable for better performance\n+    engine_args = EngineArgs.from_cli_args(argparse.Namespace(\n+        **{f.name: getattr(args, f.name) for f in dataclasses.fields(EngineArgs)}))\n     engine = LLMEngine.from_engine_args(engine_args)\n \n     model = (engine.model_executor.driver_worker.\n@@ -194,7 +194,7 @@ def deserialize():\n     per_second = convert_bytes(deserializer.total_tensor_bytes / duration)\n     after_mem = get_mem_usage()\n     print(\n-        f\"Deserialized {total_bytes_str} in {end - start:0.2f}s, {per_second}/s\"\n+        f\"Deserialized {total_bytes_str} in {duration:0.2f}s, {per_second}/s\"\n     )\n     print(f\"Memory usage before: {before_mem}\")\n     print(f\"Memory usage after: {after_mem}\")\n@@ -204,12 +204,11 @@ def deserialize():\n \n args = parse_args()\n \n-s3_access_key_id = (args.s3_access_key_id or os.environ.get(\"S3_ACCESS_KEY_ID\")\n-                    or None)\n+s3_access_key_id = args.s3_access_key_id or os.environ.get(\"S3_ACCESS_KEY_ID\")\n s3_secret_access_key = (args.s3_secret_access_key\n-                        or os.environ.get(\"S3_SECRET_ACCESS_KEY\") or None)\n+                        or os.environ.get(\"S3_SECRET_ACCESS_KEY\"))\n \n-s3_endpoint = (args.s3_endpoint or os.environ.get(\"S3_ENDPOINT_URL\") or None)\n+s3_endpoint = args.s3_endpoint or os.environ.get(\"S3_ENDPOINT_URL\")\n \n _read_stream, _write_stream = (partial(\n     stream_io.open_stream,\ndiff --git a/vllm/engine/arg_utils.py b/vllm/engine/arg_utils.py\nindex 163723b..71d9b45 100644\n--- a/vllm/engine/arg_utils.py\n+++ b/vllm/engine/arg_utils.py\n@@ -517,10 +517,9 @@ class EngineArgs:\n \n     @classmethod\n     def from_cli_args(cls, args: argparse.Namespace):\n-        # Get the list of attributes of this dataclass.\n-        attrs = [attr.name for attr in dataclasses.fields(cls)]\n-        # Set the attributes from the parsed arguments.\n-        engine_args = cls(**{attr: getattr(args, attr) for attr in attrs})\n+        # Directly iterate over dataclass fields without creating intermediate list\n+        engine_args = cls(**{attr.name: getattr(args, attr.name) \n+                             for attr in dataclasses.fields(cls)})\n         return engine_args\n \n     def create_engine_config(self, ) -> EngineConfig:\ndiff --git a/vllm/envs.py b/vllm/envs.py\nindex 91cc8f3..92096d2 100644\n--- a/vllm/envs.py\n+++ b/vllm/envs.py\n@@ -145,11 +145,11 @@ environment_variables: Dict[str, Callable[[], Any]] = {\n \n     # S3 access information, used for tensorizer to load model from S3\n     \"S3_ACCESS_KEY_ID\":\n-    lambda: os.environ.get(\"S3_ACCESS_KEY\", None),\n+    lambda: os.environ.get(\"S3_ACCESS_KEY\"),\n     \"S3_SECRET_ACCESS_KEY\":\n-    lambda: os.environ.get(\"S3_SECRET_ACCESS_KEY\", None),\n+    lambda: os.environ.get(\"S3_SECRET_ACCESS_KEY\"),\n     \"S3_ENDPOINT_URL\":\n-    lambda: os.environ.get(\"S3_ENDPOINT_URL\", None),\n+    lambda: os.environ.get(\"S3_ENDPOINT_URL\"),\n \n     # Usage stats collection\n     \"VLLM_USAGE_STATS_SERVER\":\ndiff --git a/vllm/model_executor/model_loader/tensorizer.py b/vllm/model_executor/model_loader/tensorizer.py\nindex 219a2a3..492c39a 100644\n--- a/vllm/model_executor/model_loader/tensorizer.py\n+++ b/vllm/model_executor/model_loader/tensorizer.py\n@@ -234,10 +234,10 @@ class TensorizerArgs:\n \n     @classmethod\n     def from_cli_args(cls, args: argparse.Namespace) -> \"TensorizerArgs\":\n-        attrs = [attr.name for attr in dataclasses.fields(cls)]\n+        # Directly iterate over dataclass fields without creating intermediate list\n         tensorizer_args = cls(**{\n-            attr: getattr(args, attr)\n-            for attr in attrs if hasattr(args, attr)\n+            attr.name: getattr(args, attr.name)\n+            for attr in dataclasses.fields(cls) if hasattr(args, attr.name)\n         })\n         return tensorizer_args\n \n@@ -293,7 +293,8 @@ class TensorizerAgent:\n                                          dtype=child.weight.dtype,\n                                          device=child.weight.device)\n                 new_weight[:child.weight.shape[0]].copy_(child.weight.data)\n-                new_weight[child.weight.shape[0]:].fill_(0)\n+                # Use zero_ instead of fill_(0) for better performance\n+                new_weight[child.weight.shape[0]:].zero_()\n                 child.weight.data = new_weight\n \n     def _check_tensors_on_meta_device(self):\n@@ -339,7 +340,7 @@ class TensorizerAgent:\n         after_mem = get_mem_usage()\n         deserializer.close()\n         logger.info(\"Deserialized %s in %0.2fs, %s/s\", total_bytes_str,\n-                    end - start, per_second)\n+                    duration, per_second)\n         logger.info(\"Memory usage before: %s\", before_mem)\n         logger.info(\"Memory usage after: %s\", after_mem)\n \n", "model_name_or_path": "gpt-5-2025-08-07"}
