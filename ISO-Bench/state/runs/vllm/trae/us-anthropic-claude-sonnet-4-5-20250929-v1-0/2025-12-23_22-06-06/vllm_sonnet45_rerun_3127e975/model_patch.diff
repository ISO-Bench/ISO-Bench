diff --git a/.github/workflows/pre-commit.yml b/.github/workflows/pre-commit.yml
index 8c72a70..545fa55 100644
--- a/.github/workflows/pre-commit.yml
+++ b/.github/workflows/pre-commit.yml
@@ -10,8 +10,13 @@ jobs:
     runs-on: ubuntu-latest
     steps:
     - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2
+      with:
+        fetch-depth: 0
     - uses: actions/setup-python@0b93645e9fea7318ecaed2b359559ac225c90a2b # v5.3.0
       with:
         python-version: "3.12"
+        cache: 'pip'
     - run: echo "::add-matcher::.github/workflows/matchers/actionlint.json"
     - uses: pre-commit/action@2c7b3805fd2a0fd8c1884dcaebf91fc102a13ecd # v3.0.1
+      with:
+        extra_args: --show-diff-on-failure --color=always
diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml
index 8ea0f37..b44e7da 100644
--- a/.pre-commit-config.yaml
+++ b/.pre-commit-config.yaml
@@ -1,15 +1,18 @@
+default_install_hook_types: [pre-commit, commit-msg]
+default_stages: [pre-commit]
+fail_fast: false
 repos:
 - repo: https://github.com/google/yapf
   rev: v0.32.0
   hooks:
   - id: yapf
-    args: [--in-place, --verbose]
+    args: [--in-place]
     additional_dependencies: [toml] # TODO: Remove when yapf is upgraded
 - repo: https://github.com/astral-sh/ruff-pre-commit
   rev: v0.6.5
   hooks:
   - id: ruff
-    args: [--output-format, github]
+    args: [--output-format, github, --exit-zero]
 - repo: https://github.com/codespell-project/codespell
   rev: v2.3.0
   hooks:
@@ -25,7 +28,7 @@ repos:
   - id: clang-format
     exclude: 'csrc/(moe/topk_softmax_kernels.cu|quantization/gguf/(ggml-common.h|dequantize.cuh|vecdotq.cuh|mmq.cuh|mmvq.cuh))'
     types_or: [c++, cuda]
-    args: [--style=file, --verbose]
+    args: [--style=file]
 - repo: https://github.com/jackdewinter/pymarkdown
   rev: v0.9.27
   hooks:
@@ -33,30 +36,13 @@ repos:
     files: docs/.*
 - repo: local
   hooks:
-  - id: mypy-3.9 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward
-    name: Run mypy for Python 3.9
-    entry: tools/mypy.sh 1 "3.9"
-    language: python
-    types: [python]
-    additional_dependencies: &mypy_deps [mypy==1.11.1, types-setuptools, types-PyYAML, types-requests]
-  - id: mypy-3.10 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward
-    name: Run mypy for Python 3.10
-    entry: tools/mypy.sh 1 "3.10"
-    language: python
-    types: [python]
-    additional_dependencies: *mypy_deps
-  - id: mypy-3.11 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward
-    name: Run mypy for Python 3.11
-    entry: tools/mypy.sh 1 "3.11"
-    language: python
-    types: [python]
-    additional_dependencies: *mypy_deps
   - id: mypy-3.12 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward
     name: Run mypy for Python 3.12
     entry: tools/mypy.sh 1 "3.12"
     language: python
     types: [python]
-    additional_dependencies: *mypy_deps
+    additional_dependencies: &mypy_deps [mypy==1.11.1, types-setuptools, types-PyYAML, types-requests]
+    pass_filenames: false
   - id: shellcheck
     name: Lint shell scripts
     entry: tools/shellcheck.sh
