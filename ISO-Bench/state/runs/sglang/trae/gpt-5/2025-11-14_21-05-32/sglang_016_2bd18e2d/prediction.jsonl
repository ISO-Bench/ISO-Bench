{"instance_id": "/home/ubuntu/OmniPerf-Bench/sglan__repo-83452db", "model_patch": "diff --git a/python/sglang/srt/managers/schedule_batch.py b/python/sglang/srt/managers/schedule_batch.py\nindex faf05a7ff..072656da3 100644\n--- a/python/sglang/srt/managers/schedule_batch.py\n+++ b/python/sglang/srt/managers/schedule_batch.py\n@@ -668,7 +668,7 @@ class ScheduleBatch:\n                     or len(req.prefix_indices) >= im.num_image_tokens\n                 )\n \n-        self.encoder_lens = torch.tensor(self.encoder_lens_cpu, dtype=torch.int32).to(\n+        self.encoder_lens = torch.tensor(self.encoder_lens_cpu, dtype=torch.int64).to(\n             self.device, non_blocking=True\n         )\n \n@@ -702,19 +702,19 @@ class ScheduleBatch:\n         self.input_ids = torch.tensor(sum(input_ids, []), dtype=torch.int32).to(\n             self.device, non_blocking=True\n         )\n-        self.seq_lens = torch.tensor(seq_lens, dtype=torch.int32).to(\n+        self.seq_lens = torch.tensor(seq_lens, dtype=torch.int64).to(\n             self.device, non_blocking=True\n         )\n \n         if not decoder_out_cache_loc:\n-            self.out_cache_loc = torch.zeros(0, dtype=torch.int32).to(\n+            self.out_cache_loc = torch.empty(0, dtype=torch.int32).to(\n                 self.device, non_blocking=True\n             )\n         else:\n             self.out_cache_loc = torch.cat(decoder_out_cache_loc)\n \n         if not encoder_out_cache_loc:\n-            self.encoder_out_cache_loc = torch.zeros(0, dtype=torch.int32).to(\n+            self.encoder_out_cache_loc = torch.empty(0, dtype=torch.int32).to(\n                 self.device, non_blocking=True\n             )\n         else:\n@@ -778,10 +778,10 @@ class ScheduleBatch:\n         self.input_ids = torch.tensor(sum(input_ids, []), dtype=torch.int32).to(\n             self.device, non_blocking=True\n         )\n-        self.req_pool_indices = torch.tensor(req_pool_indices, dtype=torch.int32).to(\n+        self.req_pool_indices = torch.tensor(req_pool_indices, dtype=torch.int64).to(\n             self.device, non_blocking=True\n         )\n-        self.seq_lens = torch.tensor(seq_lens, dtype=torch.int32).to(\n+        self.seq_lens = torch.tensor(seq_lens, dtype=torch.int64).to(\n             self.device, non_blocking=True\n         )\n         self.input_embeds = (\n@@ -1084,7 +1084,7 @@ class ScheduleBatch:\n             self.encoder_lens_cpu = [self.encoder_lens_cpu[i] for i in keep_indices]\n \n         self.reqs = [self.reqs[i] for i in keep_indices]\n-        new_indices = torch.tensor(keep_indices, dtype=torch.int32).to(\n+        new_indices = torch.tensor(keep_indices, dtype=torch.int64).to(\n             self.device, non_blocking=True\n         )\n         self.req_pool_indices = self.req_pool_indices[new_indices]\n", "model_name_or_path": "gpt-5-2025-08-07"}
