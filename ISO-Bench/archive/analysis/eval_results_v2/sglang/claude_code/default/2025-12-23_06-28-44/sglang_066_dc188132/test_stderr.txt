Traceback (most recent call last):
  File "/tmp/eval_worktree_eom9atqj/test_script.py", line 115, in setup
    from sglang.srt.mem_cache.memory_pool import MHATokenToKVPool
  File "/tmp/eval_worktree_eom9atqj/worktree/python/sglang/__init__.py", line 4, in <module>
    from sglang.api import (
  File "/tmp/eval_worktree_eom9atqj/worktree/python/sglang/api.py", line 7, in <module>
    from sglang.lang.backend.base_backend import BaseBackend
  File "/tmp/eval_worktree_eom9atqj/worktree/python/sglang/lang/backend/base_backend.py", line 5, in <module>
    from sglang.lang.interpreter import StreamExecutor
  File "/tmp/eval_worktree_eom9atqj/worktree/python/sglang/lang/interpreter.py", line 34, in <module>
    from sglang.utils import (
  File "/tmp/eval_worktree_eom9atqj/worktree/python/sglang/utils.py", line 22, in <module>
    from IPython.display import HTML, display
ModuleNotFoundError: No module named 'IPython'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/tmp/eval_worktree_eom9atqj/test_script.py", line 389, in <module>
    run_test(args.eqcheck, args.reference, args.prefix)
  File "/tmp/eval_worktree_eom9atqj/test_script.py", line 320, in run_test
    data = setup()
  File "/tmp/eval_worktree_eom9atqj/test_script.py", line 158, in setup
    pool = MockPool()
  File "/tmp/eval_worktree_eom9atqj/test_script.py", line 137, in __init__
    self.k_buffer = [torch.zeros(total_tokens, num_heads, head_dim, device=device, dtype=dtype) 
  File "/tmp/eval_worktree_eom9atqj/test_script.py", line 137, in <listcomp>
    self.k_buffer = [torch.zeros(total_tokens, num_heads, head_dim, device=device, dtype=dtype) 
NameError: free variable 'total_tokens' referenced before assignment in enclosing scope

