{"instance_id": "/home/ubuntu/OmniPerf-Bench/sglan__repo-5ab20cc", "model_patch": "diff --git a/python/sglang/srt/mem_cache/radix_cache.py b/python/sglang/srt/mem_cache/radix_cache.py\nindex 68bcb5b0b..005a1d665 100644\n--- a/python/sglang/srt/mem_cache/radix_cache.py\n+++ b/python/sglang/srt/mem_cache/radix_cache.py\n@@ -189,7 +189,7 @@ class RadixCache(BasePrefixCache):\n             num_evicted += len(x.value)\n             self._delete_leaf(x)\n \n-            if len(x.parent.children) == 0:\n+            if not x.parent.children:\n                 heapq.heappush(leaves, x.parent)\n \n     def inc_lock_ref(self, node: TreeNode):\n@@ -227,11 +227,11 @@ class RadixCache(BasePrefixCache):\n         self, node: TreeNode, key: List, value, last_node: TreeNode\n     ):\n         node.last_access_time = time.time()\n-        if len(key) == 0:\n+        if not key:\n             return\n \n-        if key[0] in node.children.keys():\n-            child = node.children[key[0]]\n+        child = node.children.get(key[0])\n+        if child is not None:\n             prefix_len = _key_match(child.key, key)\n             if prefix_len < len(child.key):\n                 new_node = self._split_node(child.key, child, prefix_len)\n@@ -245,7 +245,8 @@ class RadixCache(BasePrefixCache):\n     def _split_node(self, key, child: TreeNode, split_len: int):\n         # new_node -> child\n         new_node = TreeNode()\n-        new_node.children = {key[split_len:][0]: child}\n+        # Avoid creating intermediate slices when indexing\n+        new_node.children = {key[split_len]: child}\n         new_node.parent = child.parent\n         new_node.lock_ref = child.lock_ref\n         new_node.key = child.key[:split_len]\n@@ -253,16 +254,16 @@ class RadixCache(BasePrefixCache):\n         child.parent = new_node\n         child.key = child.key[split_len:]\n         child.value = child.value[split_len:]\n-        new_node.parent.children[key[:split_len][0]] = new_node\n+        new_node.parent.children[key[0]] = new_node\n         return new_node\n \n     def _insert_helper(self, node: TreeNode, key: List, value):\n         node.last_access_time = time.time()\n-        if len(key) == 0:\n+        if not key:\n             return 0\n \n-        if key[0] in node.children.keys():\n-            child = node.children[key[0]]\n+        child = node.children.get(key[0])\n+        if child is not None:\n             prefix_len = _key_match(child.key, key)\n \n             if prefix_len == len(child.key):\n@@ -293,10 +294,8 @@ class RadixCache(BasePrefixCache):\n             self._print_helper(child, indent=indent + 2)\n \n     def _delete_leaf(self, node):\n-        for k, v in node.parent.children.items():\n-            if v == node:\n-                break\n-        del node.parent.children[k]\n+        # Directly delete by the first token of the node's key\n+        del node.parent.children[node.key[0]]\n         self.evictable_size_ -= len(node.key)\n \n     def _total_size_helper(self, node: TreeNode):\n@@ -311,11 +310,11 @@ class RadixCache(BasePrefixCache):\n \n         while stack:\n             cur_node = stack.pop()\n-            if len(cur_node.children) == 0:\n+            if not cur_node.children:\n                 ret_list.append(cur_node)\n             else:\n                 stack.extend(cur_node.children.values())\n-\n+        \n         return ret_list\n \n \n", "model_name_or_path": "gpt-5-2025-08-07"}
