{"instance_id": "/home/ubuntu/OmniPerf-Bench/sglan__repo-136c6e0", "model_patch": "diff --git a/python/pyproject.toml b/python/pyproject.toml\nindex e72488849..0d6d712a6 100644\n--- a/python/pyproject.toml\n+++ b/python/pyproject.toml\n@@ -38,6 +38,7 @@ runtime_common = [\n     \"psutil\",\n     \"pydantic\",\n     \"pynvml\",\n+    \"pybase64\",\n     \"python-multipart\",\n     \"pyzmq>=25.1.2\",\n     \"soundfile==0.13.1\",\ndiff --git a/python/sglang/bench_serving.py b/python/sglang/bench_serving.py\nindex 04c2202d2..728da2771 100644\n--- a/python/sglang/bench_serving.py\n+++ b/python/sglang/bench_serving.py\n@@ -814,9 +814,8 @@ def sample_mmmu_requests(\n         List of tuples (prompt, prompt_token_len, output_token_len).\n     \"\"\"\n     try:\n-        import base64\n         import io\n-\n+        import pybase64 as base64\n         from datasets import load_dataset\n     except ImportError:\n         raise ImportError(\"Please install datasets: pip install datasets\")\ndiff --git a/python/sglang/srt/entrypoints/http_server_engine.py b/python/sglang/srt/entrypoints/http_server_engine.py\nindex b2edf1abe..eceb67928 100644\n--- a/python/sglang/srt/entrypoints/http_server_engine.py\n+++ b/python/sglang/srt/entrypoints/http_server_engine.py\n@@ -1,4 +1,3 @@\n-import base64\n import copy\n import dataclasses\n import multiprocessing\n@@ -140,3 +139,7 @@ class HttpServerEngineAdapter(EngineBase):\n \n     def flush_cache(self):\n         return self._make_request(\"flush_cache\")\n+try:\n+    import pybase64 as base64  # noqa: F401\n+except Exception:\n+    import base64  # noqa: F401\ndiff --git a/python/sglang/srt/multimodal/mm_utils.py b/python/sglang/srt/multimodal/mm_utils.py\nindex 9c05c1859..bacc152ca 100644\n--- a/python/sglang/srt/multimodal/mm_utils.py\n+++ b/python/sglang/srt/multimodal/mm_utils.py\n@@ -28,7 +28,6 @@ LLaVA-Onevision : https://arxiv.org/pdf/2408.03326\n \n \"\"\"\n import ast\n-import base64\n import math\n import re\n from io import BytesIO\n@@ -38,6 +37,12 @@ from PIL import Image\n \n from sglang.srt.utils import flatten_nested_list\n \n+# Prefer faster C-accelerated base64 implementation when available\n+try:\n+    import pybase64 as base64\n+except Exception:\n+    import base64\n+\n \n def has_valid_data(data) -> bool:\n     if data is None:\ndiff --git a/python/sglang/srt/utils.py b/python/sglang/srt/utils.py\nindex 052e7328f..c6d878f8a 100644\n--- a/python/sglang/srt/utils.py\n+++ b/python/sglang/srt/utils.py\n@@ -15,7 +15,10 @@\n \n from __future__ import annotations\n \n-import base64\n+try:\n+    import pybase64 as base64\n+except Exception:\n+    import base64\n import builtins\n import ctypes\n import dataclasses\ndiff --git a/python/sglang/utils.py b/python/sglang/utils.py\nindex 6b3f36e19..25470072c 100644\n--- a/python/sglang/utils.py\n+++ b/python/sglang/utils.py\n@@ -1,6 +1,9 @@\n \"\"\"Common utilities\"\"\"\n \n-import base64\n+try:\n+    import pybase64 as base64\n+except Exception:\n+    import base64\n import importlib\n import json\n import logging\ndiff --git a/test/srt/test_vision_openai_server_common.py b/test/srt/test_vision_openai_server_common.py\nindex 3687d9381..8dcc05609 100644\n--- a/test/srt/test_vision_openai_server_common.py\n+++ b/test/srt/test_vision_openai_server_common.py\n@@ -1,4 +1,7 @@\n-import base64\n+try:\n+    import pybase64 as base64\n+except Exception:\n+    import base64\n import copy\n import io\n import json\n", "model_name_or_path": "gpt-5-2025-08-07"}
