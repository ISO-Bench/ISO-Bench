{"instance_id": "/home/raven/coding-mess/kernel-corp/OmniPerf-Bench/vllm__repo-a732900", "model_patch": "diff --git a/.github/workflows/pre-commit.yml b/.github/workflows/pre-commit.yml\nindex 8c72a709c..1f4c9b103 100644\n--- a/.github/workflows/pre-commit.yml\n+++ b/.github/workflows/pre-commit.yml\n@@ -14,4 +14,13 @@ jobs:\n       with:\n         python-version: \"3.12\"\n     - run: echo \"::add-matcher::.github/workflows/matchers/actionlint.json\"\n+    - name: Cache pre-commit\n+      uses: actions/cache@v4\n+      with:\n+        path: ~/.cache/pre-commit\n+        key: pre-commit-${{ runner.os }}-${{ hashFiles('.pre-commit-config.yaml') }}\n+        restore-keys: |\n+          pre-commit-${{ runner.os }}-\n     - uses: pre-commit/action@2c7b3805fd2a0fd8c1884dcaebf91fc102a13ecd # v3.0.1\n+      with:\n+        extra_args: --hook-stage manual\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex 8ea0f3788..7b1b062a7 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -1,20 +1,24 @@\n+default_stages:\n+  - pre-commit\n+  - manual\n repos:\n - repo: https://github.com/google/yapf\n   rev: v0.32.0\n   hooks:\n   - id: yapf\n-    args: [--in-place, --verbose]\n+    args: [--in-place]\n     additional_dependencies: [toml] # TODO: Remove when yapf is upgraded\n - repo: https://github.com/astral-sh/ruff-pre-commit\n   rev: v0.6.5\n   hooks:\n   - id: ruff\n-    args: [--output-format, github]\n+    args: [--output-format, github, --force-exclude]\n+    exclude: '(docs/|benchmarks/|examples/)'\n - repo: https://github.com/codespell-project/codespell\n   rev: v2.3.0\n   hooks:\n   - id: codespell\n-    exclude: 'benchmarks/sonnet.txt|(build|tests/(lora/data|models/fixtures|prompts))/.*'\n+    exclude: 'benchmarks/sonnet.txt|(build|tests/(lora/data|models/fixtures|prompts))/.*|examples/.*|docs/.*'\n - repo: https://github.com/PyCQA/isort\n   rev: 5.13.2\n   hooks:\n@@ -38,24 +42,28 @@ repos:\n     entry: tools/mypy.sh 1 \"3.9\"\n     language: python\n     types: [python]\n+    stages: [manual]\n     additional_dependencies: &mypy_deps [mypy==1.11.1, types-setuptools, types-PyYAML, types-requests]\n   - id: mypy-3.10 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward\n     name: Run mypy for Python 3.10\n     entry: tools/mypy.sh 1 \"3.10\"\n     language: python\n     types: [python]\n+    stages: [manual]\n     additional_dependencies: *mypy_deps\n   - id: mypy-3.11 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward\n     name: Run mypy for Python 3.11\n     entry: tools/mypy.sh 1 \"3.11\"\n     language: python\n     types: [python]\n+    stages: [manual]\n     additional_dependencies: *mypy_deps\n   - id: mypy-3.12 # TODO: Use https://github.com/pre-commit/mirrors-mypy when mypy setup is less awkward\n     name: Run mypy for Python 3.12\n     entry: tools/mypy.sh 1 \"3.12\"\n     language: python\n     types: [python]\n+    stages: [manual]\n     additional_dependencies: *mypy_deps\n   - id: shellcheck\n     name: Lint shell scripts\n@@ -71,3 +79,4 @@ repos:\n   rev: v1.7.6\n   hooks:\n   - id: actionlint\n+    stages: [manual]\n", "model_name_or_path": "gpt-5-2025-08-07"}
