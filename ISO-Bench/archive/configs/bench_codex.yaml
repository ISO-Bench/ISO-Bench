# Global configuration for perf-agents-bench
# All values support environment variable substitution: ${VAR:-default}

container:
  engine: "${CONTAINER_ENGINE:-docker}"   # docker | podman
  platform: "${CONTAINER_PLATFORM:-linux/amd64}"  # set to linux/amd64 on Apple Silicon
  cpus: "${BENCH_CPUS:-2}"
  memory: "${BENCH_MEMORY:-4g}"
  network_policy: "off"                   # off | on_for_prepare | on
  gpus: "${BENCH_GPUS:-none}"             # none | all | "device=0"

paths:
  work_root: "./.work"
  state_root: "./state"
  reports_root: "./reports"

agents:
  default: "codex_cli"
  codex_cli:
    cli: "${CODEX_CLI:-codex}"
    args:
      max_steps: 120
      profile: "${CODEX_PROFILE:-kernel-bot}"
    time_budget_minutes: 120
    # Optional: provide a CLI config file if you use one
    # config_file: "${CODEX_CLI_CONFIG:-codex.toml}"
  openhands:
    cli: "${OPENHANDS_CLI:-uvx}"
    time_budget_minutes: 60
    container_image: "${OPENHANDS_CONTAINER_IMAGE:-docker.all-hands.dev/all-hands-ai/openhands:0.54}"
    runtime_image: "${OPENHANDS_RUNTIME_IMAGE:-docker.all-hands.dev/all-hands-ai/runtime:0.54-nikolaik}"
    args:
      # Proper headless mode configuration - removed subcommand as we handle it in prepare.py
      iterations: 1  # Maximum iterations for the agent
      max_budget_per_task: 10.0  # USD limit for API calls
  trae:
    cli: "${TRAE_PYTHON:-/home/ubuntu/ISO-Bench/bench-env/bin/python}"
    args:
      max_steps: 120
    time_budget_minutes: 120
    config_file: "${TRAE_CONFIG:-/home/ubuntu/ISO-Bench/third-party/trae-agent/trae_config.yaml}"
  codex:
    cli: "${CODEX_PYTHON:-/home/ubuntu/ISO-Bench/bench-env/bin/python}"
    args:
      max_steps: 120
    time_budget_minutes: 120
    config_file: "${CODEX_CONFIG:-/home/ubuntu/ISO-Bench/codex_agent/codex_config.yaml}"

metrics:
  # names map to metric plugin entrypoints (registry)
  allowed:
    - "runtime:throughput"
    - "quality:hash_match"
