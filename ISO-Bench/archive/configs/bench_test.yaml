# Global configuration for perf-agents-bench
# All values support environment variable substitution: ${VAR:-default}

container:
  engine: "${CONTAINER_ENGINE:-docker}"   # docker | podman
  platform: "${CONTAINER_PLATFORM:-linux/amd64}"  # set to linux/amd64 on Apple Silicon
  cpus: "${BENCH_CPUS:-2}"
  memory: "${BENCH_MEMORY:-4g}"
  network_policy: "off"                   # off | on_for_prepare | on
  gpus: "${BENCH_GPUS:-none}"             # none | all | "device=0"

paths:
  work_root: "./.work"
  state_root: "./state"
  reports_root: "./reports"

agents:
  default: "trae"
  openhands:
    cli: "python"
    time_budget_minutes: 60
    container_image: ""
    runtime_image: ""
    args:
      iterations: 50
  trae:
    cli: "python"
    args:
      max_steps: 120
    time_budget_minutes: 120
    # Use absolute path so subprocess can resolve it
    config_file: "/home/raven/coding-mess/kernel-corp/ISO-Bench/third-party/trae-agent/trae_config.yaml"
  codex:
    cli: "python"
    args:
      max_steps: 120
    time_budget_minutes: 120
    config_file: "/home/raven/coding-mess/kernel-corp/ISO-Bench/codex_agent/codex_config.yaml"

metrics:
  # names map to metric plugin entrypoints (registry)
  allowed:
    - "runtime:throughput"
    - "quality:hash_match"

# Experiment controls (A/B: hints vs no-hints; optional preflight)
experiment:
  hints_enabled: ${HINTS_ENABLED:-false}
  preflight_enabled: ${PREFLIGHT_ENABLED:-false}
  # Absolute or repo-root relative directories
  metadata_json_dir: ${METADATA_JSON_DIR:-/home/raven/coding-mess/kernel-corp/ISO-Bench/tmp_single_commit}
  generators_dir: ${GENERATORS_DIR:-/home/raven/coding-mess/kernel-corp/ISO-Bench/misc/experiments/generated_test_generators_v4}
